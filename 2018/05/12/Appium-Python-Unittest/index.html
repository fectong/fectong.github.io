<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="1. Java JDK  配置 JDK 环境变量 123456789101112改为自己电脑 JDK 的安装位置JAVA_HOME:  C:\Program Files\Java\jdk1.8.0_144JRE_HOME:  %JAVA_HOME%\jreCLASSPATH:  .;%JAVA_HOME%\lib;%JRE_HOME%\libPATH:  %JAVA_HOME%\bin  %JRE">
<meta name="keywords" content="Python,Appium,Unittest,Test">
<meta property="og:type" content="article">
<meta property="og:title" content="使用 Appium + Python 实机模拟单元测试">
<meta property="og:url" content="http://yoursite.com/2018/05/12/Appium-Python-Unittest/index.html">
<meta property="og:site_name" content="Fe2Cu">
<meta property="og:description" content="1. Java JDK  配置 JDK 环境变量 123456789101112改为自己电脑 JDK 的安装位置JAVA_HOME:  C:\Program Files\Java\jdk1.8.0_144JRE_HOME:  %JAVA_HOME%\jreCLASSPATH:  .;%JAVA_HOME%\lib;%JRE_HOME%\libPATH:  %JAVA_HOME%\bin  %JRE">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-06-27T05:27:26.795Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用 Appium + Python 实机模拟单元测试">
<meta name="twitter:description" content="1. Java JDK  配置 JDK 环境变量 123456789101112改为自己电脑 JDK 的安装位置JAVA_HOME:  C:\Program Files\Java\jdk1.8.0_144JRE_HOME:  %JAVA_HOME%\jreCLASSPATH:  .;%JAVA_HOME%\lib;%JRE_HOME%\libPATH:  %JAVA_HOME%\bin  %JRE">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>使用 Appium + Python 实机模拟单元测试</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" class="active"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" class="active"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu" style="visibility: visible;">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/tags/">TAGS</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/06/21/Two-Ways-To-Use-Handler/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/05/05/Android-P-BottomAppBar-with-FAB/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <!-- <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/05/12/Appium-Python-Unittest/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&text=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-twitter " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&is_video=false&description=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=使用 Appium + Python 实机模拟单元测试&body=Check out this article: http://yoursite.com/2018/05/12/Appium-Python-Unittest/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-reddit " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-digg " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&name=使用 Appium + Python 实机模拟单元测试&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li> -->
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Java-JDK"><span class="toc-number">1.</span> <span class="toc-text">1. Java JDK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Android-SDK"><span class="toc-number">2.</span> <span class="toc-text">2. Android SDK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Python-3-X-X"><span class="toc-number">3.</span> <span class="toc-text">3. Python 3.X.X</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Appium"><span class="toc-number">4.</span> <span class="toc-text">4. Appium</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-最终检查"><span class="toc-number">5.</span> <span class="toc-text">5. 最终检查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-示例代码"><span class="toc-number">6.</span> <span class="toc-text">6. 示例代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-模板介绍"><span class="toc-number">7.</span> <span class="toc-text">7. 模板介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-注意事项"><span class="toc-number">8.</span> <span class="toc-text">8. 注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Source-Code"><span class="toc-number">9.</span> <span class="toc-text">9. Source Code</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        使用 Appium + Python 实机模拟单元测试
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Fe2Cu</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-05-12T06:08:27.000Z" itemprop="datePublished">2018-05-12</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Appium/">Appium</a>, <a class="tag-link" href="/tags/Python/">Python</a>, <a class="tag-link" href="/tags/Test/">Test</a>, <a class="tag-link" href="/tags/Unittest/">Unittest</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="1-Java-JDK"><a href="#1-Java-JDK" class="headerlink" title="1. Java JDK"></a>1. Java JDK</h2><hr>
<p> 配置 JDK 环境变量</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">改为自己电脑 JDK 的安装位置</span><br><span class="line"><span class="function">JAVA_HOME:</span></span><br><span class="line"><span class="function">  <span class="title">C</span>:\<span class="title">Program</span> <span class="title">Files</span>\<span class="title">Java</span>\<span class="title">jdk1</span>.8.0<span class="title">_144</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">JRE_HOME</span>:</span></span><br><span class="line"><span class="function">  %<span class="title">JAVA_HOME</span>%\<span class="title">jre</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">CLASSPATH</span>:</span></span><br><span class="line"><span class="function">  .;%<span class="title">JAVA_HOME</span>%\<span class="title">lib</span>;%<span class="title">JRE_HOME</span>%\<span class="title">lib</span></span></span><br><span class="line"><span class="function"><span class="title">PATH</span>:</span></span><br><span class="line"><span class="function">  %<span class="title">JAVA_HOME</span>%\<span class="title">bin</span></span></span><br><span class="line"><span class="function">  %<span class="title">JRE_HOME</span>%\<span class="title">bin</span></span></span><br></pre></td></tr></table></figure>
<p><code>检查 JAVA JDK</code></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>
<h2 id="2-Android-SDK"><a href="#2-Android-SDK" class="headerlink" title="2. Android SDK"></a>2. Android SDK</h2><hr>
<p>配置 SDK 环境变量</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ANDROID_HOME:</span></span><br><span class="line"><span class="function">  改为自己电脑 <span class="title">SDK</span> 的安装位置</span></span><br><span class="line"><span class="function">  <span class="title">D</span>:\<span class="title">Android</span>\<span class="title">sdk</span></span></span><br><span class="line"><span class="function"><span class="title">ANDROID_SWT</span>:</span></span><br><span class="line"><span class="function">  使用 <span class="title">uiautomatorviewer</span>, 选择其中之一</span></span><br><span class="line"><span class="function">  %<span class="title">ANDROID_HOME</span>%\<span class="title">tools</span>\<span class="title">lib</span>\<span class="title">x86</span></span></span><br><span class="line"><span class="function">  %<span class="title">ANDROID_HOME</span>%\<span class="title">tools</span>\<span class="title">lib</span>\<span class="title">x86_64</span></span></span><br><span class="line"><span class="function"><span class="title">PATH</span>:</span></span><br><span class="line"><span class="function">  %<span class="title">ANDROID_HOME</span>%\<span class="title">tools</span></span></span><br><span class="line"><span class="function">  %<span class="title">ANDROID_HOME</span>%\<span class="title">platform</span>-<span class="title">tools</span></span></span><br></pre></td></tr></table></figure>
<p><code>检查 Android SDK</code></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb version</span><br></pre></td></tr></table></figure>
<h2 id="3-Python-3-X-X"><a href="#3-Python-3-X-X" class="headerlink" title="3. Python 3.X.X"></a>3. Python 3.X.X</h2><hr>
<p>安装时会提示是否添加到系统变量, 手动添加则按照以下设置</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">PATH:</span></span><br><span class="line"><span class="function">  改为自己电脑 <span class="title">Python</span> 的安装位置</span></span><br><span class="line"><span class="function">  <span class="title">C</span>:\<span class="title">Users</span>\<span class="title">xxx</span>\<span class="title">AppData</span>\<span class="title">Local</span>\<span class="title">Programs</span>\<span class="title">Python</span>\<span class="title">Python3x</span>-<span class="title">xx</span></span></span><br></pre></td></tr></table></figure>
<p><code>检查 Python</code></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python --version</span><br></pre></td></tr></table></figure>
<p>更新pip</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install -U pip</span><br></pre></td></tr></table></figure>
<p>使用pip</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">提示出错,尝试重新安装或更新 pip</span><br><span class="line">python -m pip install --upgrade pip --force-reinstall</span><br><span class="line">或者直接按以下格式使用</span><br><span class="line">python -m pip install package-name</span><br></pre></td></tr></table></figure>
<p>安装所需框架</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br><span class="line">pip install selenium</span><br><span class="line">pip install Appium-Python-Client</span><br><span class="line"></span><br><span class="line"># 使用 RobotFramework 则装</span><br><span class="line">pip install robotframework</span><br><span class="line">pip install robotframework-appiumlibrary</span><br></pre></td></tr></table></figure>
<h2 id="4-Appium"><a href="#4-Appium" class="headerlink" title="4. Appium"></a>4. Appium</h2><hr>
<p>选择一种安装方式:</p>
<ul>
<li><p><a href="https://appium.io/downloads.html" target="_blank" rel="noopener">官网</a>下载 <a href="https://github.com/appium/appium-desktop/releases" target="_blank" rel="noopener">Appium</a> 桌面端安装</p>
</li>
<li><p>通过 NodeJS 安装<br><code>推荐使用</code></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g appium</span><br><span class="line">npm install -g appium-doctor</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-最终检查"><a href="#5-最终检查" class="headerlink" title="5. 最终检查"></a>5. 最终检查</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 此条必须使用 nodejs 安装 appium-doctor 才能使用</span><br><span class="line">appium-doctor</span><br></pre></td></tr></table></figure>
<h2 id="6-示例代码"><a href="#6-示例代码" class="headerlink" title="6. 示例代码"></a>6. 示例代码</h2><hr>
<ul>
<li><p>bluetooth.py</p>
<p><code>打开 设置 - 蓝牙 - 点击Switch按钮</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> appium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppTest</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line"><span class="meta">  @classmethod</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">setUpClass</span><span class="params">(self)</span>:</span></span><br><span class="line">    desired_caps = &#123;</span><br><span class="line">      <span class="string">'platformName'</span>: <span class="string">'Android'</span>,              <span class="comment"># 测试平台</span></span><br><span class="line">      <span class="string">'platformVersion'</span>: <span class="string">'8.1.0'</span>,             <span class="comment"># 测试手机的 Android 版本</span></span><br><span class="line">      <span class="string">'deviceName'</span>: <span class="string">'9190aeba'</span>,               <span class="comment"># 连接设备到电脑使用 adb devices 时所显示的字符串</span></span><br><span class="line">      <span class="string">'appPackage'</span>: <span class="string">'com.android.settings'</span>,   <span class="comment"># 所要测试的应用的包名</span></span><br><span class="line">      <span class="string">'appActivity'</span>: <span class="string">'.Settings'</span>,             <span class="comment"># 测试应用的启动 Activity</span></span><br><span class="line">      <span class="string">'automationName'</span>: <span class="string">'UiAutomator2'</span>        <span class="comment"># 默认不配置, 此条会使用 UiAutomator 而不是 UiAutomator2 会导致在高版本 Android 中无法处理点击事件</span></span><br><span class="line">    &#125;</span><br><span class="line">    self.driver = webdriver.Remote(<span class="string">'http://127.0.0.1:4723/wd/hub'</span>, desired_caps)  <span class="comment"># 127.0.0.1:4723 与 Appium Server 端设置一致</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">test_bluetooth</span><span class="params">(self)</span>:</span></span><br><span class="line">    key_bluetooth = WebDriverWait(self.driver, <span class="number">5</span>).until(<span class="keyword">lambda</span> x: x.find_element_by_xpath(<span class="string">"//*[contains(@text, 'Bluetooth')]"</span>))</span><br><span class="line">    key_bluetooth.click()</span><br><span class="line">    key_switch = WebDriverWait(self.driver, <span class="number">5</span>).until(<span class="keyword">lambda</span> x: x.find_element_by_xpath(<span class="string">"//*[contains(@resource-id, 'id/switch_widget')]"</span>))</span><br><span class="line">    key_switch.click()</span><br><span class="line"></span><br><span class="line"><span class="meta">  @classmethod</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">tearDownClass</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.driver.quit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">  unittest.main()</span><br></pre></td></tr></table></figure>
</li>
<li><p>bluetooth.robot<br><code>打开 设置 - 蓝牙 - 开启蓝牙 - 菜单 - 刷新</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">*** Settings ***</span><br><span class="line">Suite Setup       Open Settings App</span><br><span class="line">Suite Teardown    Close Application</span><br><span class="line">Library           AppiumLibrary</span><br><span class="line"></span><br><span class="line">*** Test Cases ***</span><br><span class="line">Test Case 1: Turn On Bluetooth</span><br><span class="line">    [Tags]    Bluetooth Test</span><br><span class="line">    Turn On Bluetooth</span><br><span class="line"></span><br><span class="line">Test Case 2: Refresh Bluetooth</span><br><span class="line">    [Tags]    Bluetooth Test</span><br><span class="line">    Refresh Bluetooth Device List</span><br><span class="line"></span><br><span class="line">*** Keywords ***</span><br><span class="line">Open Settings App</span><br><span class="line">    Open Application    http://127.0.0.1:4723/wd/hub    platformName=Android    platformVersion=7.1.2    deviceName=85a2a821 appPackage=com.android.settings    appActivity=.Settings</span><br><span class="line">    Sleep    2s</span><br><span class="line">    Open Bluetooth Setting Page</span><br><span class="line"></span><br><span class="line">Open Bluetooth Setting Page</span><br><span class="line">    Log    Click the &quot;Bluetooth&quot; Label</span><br><span class="line">    Wait Until Page Contains Element    xpath=//*[contains(@text, &apos;Bluetooth&apos;)]    10    Can NOT find &quot;Bluetooth&quot; label</span><br><span class="line">    Click Element    xpath=//*[contains(@text, &apos;Bluetooth&apos;)]</span><br><span class="line"></span><br><span class="line">Turn On Bluetooth</span><br><span class="line">    Wait Until Page Contains Element    xpath=//*[contains(@resource-id, &apos;id/switch_widget&apos;)]</span><br><span class="line">    Sleep    1s</span><br><span class="line">    $&#123;wifi_status&#125; =    Get Element Attribute    xpath=//*[contains(@resource-id, &apos;id/switch_widget&apos;)]    text</span><br><span class="line">    Run Keyword If    &apos;$&#123;wifi_status&#125;&apos; != &apos;ON&apos;    Click Element    xpath=//*[contains(@resource-id, &apos;id/switch_widget&apos;)]</span><br><span class="line"></span><br><span class="line">Refresh Bluetooth Device List</span><br><span class="line">    Click Element    xpath=//*[contains(@content-desc, &apos;More options&apos;)]</span><br><span class="line">    Sleep    2s</span><br><span class="line">    Wait Until Page Contains Element    xpath=//*[contains(@text, &apos;Refresh&apos;)]    20    Can NOT find &quot;Refresh&quot;</span><br><span class="line">    $&#123;count&#125;    Get Matching Xpath Count    xpath=//*[contains(@text, &apos;Refresh&apos;)]</span><br><span class="line">    Run Keyword If    $&#123;count&#125; &gt; 0    Click Element    xpath=//*[contains(@text, &apos;Refresh&apos;)]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="7-模板介绍"><a href="#7-模板介绍" class="headerlink" title="7. 模板介绍"></a>7. 模板介绍</h2><ul>
<li><p>启动时配置的 WebDriver 在 <a href="https://github.com/fectong/AppiumPythonTest24/server/appium_server.py" target="_blank" rel="noopener">appium_server.py</a> 之中</p>
</li>
<li><p>各测试按照测试应用进行分类, 处于 ./tests 目录</p>
</li>
<li><p>Appium Server 配置:</p>
<p>  Appium Desktop 版则设置 host 为 127.0.0.1, port 为 4723</p>
<p>  NodeJS 则使用命令打开 Appium server:</p>
  <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">appium -a <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> -p <span class="number">4723</span> -bp <span class="number">4724</span> --session-override</span><br></pre></td></tr></table></figure>
<p>  <code>-a: address</code>, host</p>
<p>  <code>-p: port</code>, 默认即为 4723</p>
<p>  <code>-bp: --bootstrapPort</code>, 默认即为 4724</p>
<p>  <code>--session-override</code>: 默认为False, 加上则为 True, 在 Parallel Test 中尤为重要</p>
</li>
<li><p>运行</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ./test24.py</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://github.com/fectong/AppiumPythonTest24/tools/HTMLTestRunner.py" target="_blank" rel="noopener">HTMLTestRunner.py</a> 文件说明:</p>
<p>原版 <a href="https://pypi.python.org/pypi/HTMLTestRunner" target="_blank" rel="noopener">路径</a>, 原版不支持 Python3.X, 项目中所用的是修改后的版本, 并使用 <a href="http://getbootstrap.com/" target="_blank" rel="noopener">Bootstrap</a> 修改了配色和样式</p>
</li>
</ul>
<h2 id="8-注意事项"><a href="#8-注意事项" class="headerlink" title="8. 注意事项"></a>8. 注意事项</h2><ul>
<li><p>在处理<code>弹窗类</code>（比如弹窗输入密码, 选择打开方式）的事件时, 处理前可以有延时操作, 处理后在发出下一个与测试机交互的命令之前不要有任何延时操作, 加入延时可能会导致这个弹窗类的操作无效;</p>
</li>
<li><p>desired_caps 中的 <code>deviceName</code> 是必须配置的变量, 但是实际没有区别不同设备的作用(官方文档是这样解释的);<br>要想区分多台设备应该将 adb device 分配给 ‘udid’ 这个配置信息来区分不同的测试设备;</p>
</li>
<li><p><code>unicodeKeyboard</code>, <code>resetKeyboard</code> 配置信息是在处理中文输入时出现的乱码问题的, 没有出现或者不需要中文输入没必要配置此信息;</p>
</li>
<li><p><code>noReset</code> 指的是每次启动应用先重置, 即清除存储和权限配置之类的;<br><code>fullReset</code> 指的是测试前把已有的APP卸载重新安装, 所以这个只适用于测试第三方APP的时候使用;</p>
</li>
<li><p><a href="https://github.com/fectong/AppiumPythonTest24/tools/utils.py" target="_blank" rel="noopener">utils.py</a> 中有 <code>action</code> 和 <code>value</code> 两个方法:<br>value(element, value) 获取 element 的某个 value (值), 比如: text, tagName<br>action(element, action, keys = None) 让 element 进行某个 action (操作), 比如: click, clear, send_keys(keys)<br>这两个方法的目的是通过封装来处理此类操作中出现的异常, 防止其导致测试中断;</p>
</li>
<li><p>Python 是动态类型的语言, 所以在某个目录运行某个 py 文件时, 此处即为根目录, 所以在别的目录使用相对路径就会造成 <code>&quot;moudules not found&quot;</code> 之类的错误, 所以在 <a href="https://github.com/fectong/AppiumPythonTest24/tools/utils.py" target="_blank" rel="noopener">utils.py</a> 中使用了 PATH 来获取 utils.py 的绝对路径, 其他 py 文件中则使用此 PATH 来完成相对路径的书写;</p>
</li>
<li><p><a href="https://github.com/fectong/AppiumPythonTest24/tools/utils.py" target="_blank" rel="noopener">utils.py</a> 中使用 <code>logging.basicConfig</code> 配置了日志记录的信息;<br><code>level=logging.INFO</code> 则记录日志级别为 INFO 的 log 信息, 可修改为 DEBUG 或其他;<br><code>PATH(&quot;../logs/&quot;+timestr+&quot;.log&quot;)</code> 为 log 的保存位置, 没有此项则默认打印输出在终端窗口;</p>
</li>
<li><p><a href="https://github.com/fectong/AppiumPythonTest24/tools/utils.py" target="_blank" rel="noopener">utils.py</a> 中 <code>wait_el_**</code> 此类方法为查找元素和查找后点击, 使用了 <code>WebDriverWait</code> 进行延时获取元素, 默认超时为 8s, 在 8s 内以 0.5s 为步进行查找, 超时后还未找到所需元素则怕抛出 TimeoutException, 提前找到则提前结束延时动作;</p>
</li>
<li><p><a href="https://github.com/fectong/AppiumPythonTest24/tools/utils.py" target="_blank" rel="noopener">utils.py</a> 中 <code>MobileSwipe</code> 集成了常用滑动操作.</p>
</li>
</ul>
<h2 id="9-Source-Code"><a href="#9-Source-Code" class="headerlink" title="9. Source Code"></a>9. Source Code</h2><p><a href="https://github.com/fectong/AppiumPythonTest24" target="_blank" rel="noopener">AppiumPythonTest24</a></p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/tags/">TAGS</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Java-JDK"><span class="toc-number">1.</span> <span class="toc-text">1. Java JDK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Android-SDK"><span class="toc-number">2.</span> <span class="toc-text">2. Android SDK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Python-3-X-X"><span class="toc-number">3.</span> <span class="toc-text">3. Python 3.X.X</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Appium"><span class="toc-number">4.</span> <span class="toc-text">4. Appium</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-最终检查"><span class="toc-number">5.</span> <span class="toc-text">5. 最终检查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-示例代码"><span class="toc-number">6.</span> <span class="toc-text">6. 示例代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-模板介绍"><span class="toc-number">7.</span> <span class="toc-text">7. 模板介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-注意事项"><span class="toc-number">8.</span> <span class="toc-text">8. 注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Source-Code"><span class="toc-number">9.</span> <span class="toc-text">9. Source Code</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <!-- <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/05/12/Appium-Python-Unittest/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&text=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&is_video=false&description=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=使用 Appium + Python 实机模拟单元测试&body=Check out this article: http://yoursite.com/2018/05/12/Appium-Python-Unittest/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&title=使用 Appium + Python 实机模拟单元测试"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/05/12/Appium-Python-Unittest/&name=使用 Appium + Python 实机模拟单元测试&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li> -->
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 Fe2Cu
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/categories/">Categories</a></li>
         
          <li><a href="/tags/">TAGS</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


